"use strict";(self.webpackChunkHelpDesk_FrontEnd=self.webpackChunkHelpDesk_FrontEnd||[]).push([[766],{9766:(Q,h,i)=>{i.r(h),i.d(h,{AuthModule:()=>Y});var p=i(6895),s=i(7337),e=i(4650);let T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-auth-layout"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"router-outlet")},dependencies:[s.lC],encapsulation:2}),t})();var _=i(5861),r=i(4006),x=i(3663),C=i(9978),Z=i(9653),g=i(4859),u=i(3546),y=i(7392),b=i(4144),m=i(9549),A=i(3683);function I(t,a){if(1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.getErrorMessage("email"))}}function F(t,a){if(1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.getErrorMessage("password"))}}let U=(()=>{class t{constructor(n,o,l){this.authService=n,this.router=o,this.store=l,this.loggedIn$=this.store.select(x.j.isLoggedIn),this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email,r.kI.pattern(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/)]),password:new r.NI("",[r.kI.minLength(8),r.kI.required])}),this.hide=!0,this.isAlreadyLogged()}isAlreadyLogged(){return this.loggedIn$.subscribe(n=>{n&&this.router.navigate(["/map"])})}getErrorMessage(n){const o=this.loginForm.get(n);return o?.touched&&o?.hasError("required")?"Ingresa un valor":o?.hasError("email")||o?.hasError("pattern")?"Ingresa un email v\xe1lido":o?.dirty&&o?.hasError("minlength")?"La contrase\xf1a debe contener m\xednimo 8 caracteres":""}login(){var n=this;return(0,_.Z)(function*(){if(n.loginForm.valid){const{email:o,password:l}=n.loginForm.value;yield n.authService.login({email:o,password:l}).subscribe({next:d=>{n.authService.setTokenId(d)}})}else n.loginForm.markAllAsTouched()})()}redirectSignUp(){this.router.navigate(["/auth/register"])}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(C.e),e.Y36(s.F0),e.Y36(Z.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:28,vars:6,consts:[[1,"login-container"],[1,"login-content"],["color","primary",1,"login-toolbar"],[1,"login-form",3,"formGroup","ngSubmit"],["appearance","outline"],["matPrefix",""],["type","email","formControlName","email","matInput","","placeholder","email@example.com"],[4,"ngIf"],["matSuffix","",3,"click"],["matInput","","placeholder","Contrase\xf1a","formControlName","password",3,"type"],[1,"login-form-btn"],["mat-flat-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled"]],template:function(n,o){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"mat-card")(3,"mat-toolbar",2),e._uU(4,"INICIAR SESI\xd4N"),e.qZA(),e.TgZ(5,"mat-card-content")(6,"form",3),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(7,"mat-form-field",4)(8,"mat-icon",5),e._uU(9,"mail"),e.qZA(),e.TgZ(10,"mat-label"),e._uU(11,"Email"),e.qZA(),e._UZ(12,"input",6),e.YNc(13,I,3,1,"mat-error",7),e.qZA(),e.TgZ(14,"mat-form-field",4)(15,"mat-icon",5),e._uU(16,"lock"),e.qZA(),e.TgZ(17,"mat-icon",8),e.NdJ("click",function(){return o.hide=!o.hide}),e._uU(18),e.qZA(),e.TgZ(19,"mat-label"),e._uU(20,"Contrase\xf1a"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,F,3,1,"mat-error",7),e.qZA(),e.TgZ(23,"div",10)(24,"button",11),e.NdJ("click",function(){return o.redirectSignUp()}),e._uU(25,"Crear cuenta"),e.qZA(),e.TgZ(26,"button",12),e._uU(27," Ingresar "),e.qZA()()()()()()()),2&n){let l,d,w;e.xp6(6),e.Q6J("formGroup",o.loginForm),e.xp6(7),e.Q6J("ngIf",null==(l=o.loginForm.get("email"))?null:l.invalid),e.xp6(5),e.hij(" ",o.hide?"visibility_off":"visibility"," "),e.xp6(3),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.Q6J("ngIf",null==(d=o.loginForm.get("password"))?null:d.invalid),e.xp6(4),e.Q6J("disabled",null==(w=o.loginForm.get("email"))?null:w.invalid)}},dependencies:[p.O5,g.lW,u.a8,u.dn,y.Hw,b.Nt,m.KE,m.hX,m.TO,m.qo,m.R9,A.Ye,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".login-container[_ngcontent-%COMP%]{height:calc(100vh - 64px);width:100%;align-items:center;display:flex;flex-wrap:wrap;justify-content:center}form[_ngcontent-%COMP%]{width:100%}.login-content[_ngcontent-%COMP%]{width:80%;max-width:400px;display:block;margin:auto}.mat-mdc-card[_ngcontent-%COMP%]{opacity:.9}.login-toolbar[_ngcontent-%COMP%]{justify-content:center}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%;display:block;padding-bottom:1rem}mat-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.mat-mdc-raised-button[_ngcontent-%COMP%]{width:100%;height:60px;margin:1rem}.login-form-btn[_ngcontent-%COMP%]{display:flex;justify-content:space-around}@media screen and (max-width: 600px){.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:.9rem}mat-toolbar[_ngcontent-%COMP%]{font-size:medium}mat-label[_ngcontent-%COMP%]{font-size:.9rem}mat-error[_ngcontent-%COMP%]{font-size:.8rem}}"]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login-page"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"app-login")},dependencies:[U]}),t})();var f=i(1954);function q(t,a){if(1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.hasError("email","email"))}}function P(t,a){1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2,"El nombre es requerido"),e.qZA()())}function O(t,a){1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2,"Los apellidos son requeridos"),e.qZA()())}function M(t,a){if(1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.hasError("password","requirements"))}}function N(t,a){if(1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.hasError("passwordConfirm","requirements"))}}function E(t,a){1&t&&(e.TgZ(0,"mat-error")(1,"small"),e._uU(2,"Las contrase\xf1as no coinciden"),e.qZA()())}var c=(()=>{return(t=c||(c={})).email="El e-mail es requerido",t.password="La contrase\xf1a es requerida",t.passwordConfirm="La confirmaci\xf3n de contrase\xf1a es requerida",t.email_hasError_email="Direcci\xf3n de e-mail incorrecta",t.password_hasError_requirements="La contrase\xf1a debe tener al menos 8 caracteres, una letra may\xfascula y un n\xfamero",t.passwordConfirm_hasError_requirements="La contrase\xf1a debe tener al menos 8 caracteres, una letra may\xfascula y un n\xfamero",c;var t})();let L=(()=>{class t{constructor(n){this.authService=n,this.hide=!0,this.registerForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),firstname:new r.NI("",[r.kI.required]),lastname:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required,f.d.checkPassword]),passwordConfirm:new r.NI("",[r.kI.required,f.d.checkPassword])},{validators:[f.d.passwordsMatching]})}get f(){return this.registerForm}register(){var n=this;return(0,_.Z)(function*(){n.f.valid&&(yield n.authService.register(n.f.value))})()}isRequired(n){return this.f.get(n)?.hasError("required")?c[n]:""}hasError(n,o){return this.f.get(n)?.hasError(o)?c[`${n}_hasError_${o}`]:this.isRequired(n)}checkValidation(n){return this.f.get(n)?.invalid&&(this.f.get(n)?.dirty||this.f.get(n)?.touched)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(C.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:51,vars:12,consts:[[1,"login-container"],[1,"login-content"],["color","primary",1,"login-toolbar"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matPrefix",""],["autofocus","","type","email","matInput","","placeholder","Escriba su email","formControlName","email"],[4,"ngIf"],[2,"display","flex","flex-direction","row"],["appearance","outline",2,"width","50%","display","inline-block","padding-right","0.15rem"],["type","text","matInput","","placeholder","Escriba su nombre","formControlName","firstname"],["appearance","outline",2,"width","50%","display","inline-block","padding-left","0.15rem"],["type","text","matInput","","placeholder","Escriba sus apellidos","formControlName","lastname"],["autocomplete","false","matInput","","placeholder","Contrase\xf1a *","formControlName","password",3,"type"],["aria-label","Ver contrase\xf1a","role","button","mat-icon-button","","matSuffix","",3,"click"],["appearance","outline",2,"padding-right","0.1rem"],["autocomplete","false","matInput","","placeholder","Confirmar contrase\xf1a *","formControlName","passwordConfirm",3,"type"],[1,"socialMediaFlex"],["type","submit","mat-raised-button","","color","primary",2,"width","50%",3,"disabled"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"mat-card")(3,"mat-toolbar",2),e._uU(4,"UNETE A LA COMUNIDAD"),e.qZA(),e.TgZ(5,"mat-card-content")(6,"form",3),e.NdJ("ngSubmit",function(){return o.register()}),e.TgZ(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Email"),e.qZA(),e.TgZ(10,"mat-icon",5),e._uU(11,"email"),e.qZA(),e._UZ(12,"input",6),e.YNc(13,q,3,1,"mat-error",7),e.qZA(),e.TgZ(14,"div",8)(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Nombre"),e.qZA(),e.TgZ(18,"mat-icon",5),e._uU(19,"person_outline"),e.qZA(),e._UZ(20,"input",10),e.YNc(21,P,3,0,"mat-error",7),e.qZA(),e.TgZ(22,"mat-form-field",11)(23,"mat-label"),e._uU(24,"Apellidos"),e.qZA(),e._UZ(25,"input",12),e.YNc(26,O,3,0,"mat-error",7),e.qZA()(),e.TgZ(27,"mat-form-field",4)(28,"mat-label"),e._uU(29,"Contrase\xf1a"),e.qZA(),e.TgZ(30,"mat-icon",5),e._uU(31,"lock_outline"),e.qZA(),e._UZ(32,"input",13),e.TgZ(33,"button",14),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(34,"mat-icon"),e._uU(35),e.qZA()(),e.YNc(36,M,3,1,"mat-error",7),e.qZA(),e.TgZ(37,"mat-form-field",15)(38,"mat-label"),e._uU(39,"Confirmar contrase\xf1a"),e.qZA(),e.TgZ(40,"mat-icon",5),e._uU(41,"lock_outline"),e.qZA(),e._UZ(42,"input",16),e.TgZ(43,"button",14),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(44,"mat-icon"),e._uU(45),e.qZA()(),e.YNc(46,N,3,1,"mat-error",7),e.qZA(),e.YNc(47,E,3,0,"mat-error",7),e.TgZ(48,"div",17)(49,"button",18),e._uU(50,"Reg\xedstrate"),e.qZA()()()()()()()),2&n&&(e.xp6(6),e.Q6J("formGroup",o.registerForm),e.xp6(7),e.Q6J("ngIf",o.checkValidation("email")),e.xp6(8),e.Q6J("ngIf",o.checkValidation("firstname")),e.xp6(5),e.Q6J("ngIf",o.checkValidation("lastname")),e.xp6(6),e.Q6J("type",o.hide?"password":"text"),e.xp6(3),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.checkValidation("password")),e.xp6(6),e.Q6J("type",o.hide?"password":"text"),e.xp6(3),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.checkValidation("passwordConfirm")),e.xp6(1),e.Q6J("ngIf",o.checkValidation("passwordConfirm")&&o.f.hasError("passwordsNotMatching")),e.xp6(2),e.Q6J("disabled",o.registerForm.invalid))},dependencies:[p.O5,g.lW,g.RK,u.a8,u.dn,y.Hw,b.Nt,m.KE,m.hX,m.TO,m.qo,m.R9,A.Ye,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".login-container[_ngcontent-%COMP%]{height:calc(100vh - 64px);width:100%;align-items:center;display:flex;flex-wrap:wrap}form[_ngcontent-%COMP%]{width:100%}.login-content[_ngcontent-%COMP%]{width:80%;max-width:400px;display:block;margin:0 auto}.mat-mdc-card[_ngcontent-%COMP%]{opacity:.9}.login-toolbar[_ngcontent-%COMP%]{justify-content:center}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%;display:block;padding-bottom:1rem}mat-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.mat-mdc-raised-button[_ngcontent-%COMP%]{width:100%;height:60px;margin:1rem}.socialMediaFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-around}@media screen and (max-width: 600px){.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:.9rem}mat-toolbar[_ngcontent-%COMP%]{font-size:medium}mat-label[_ngcontent-%COMP%]{font-size:.9rem}mat-error[_ngcontent-%COMP%]{font-size:.8rem}}"]}),t})();const k=[{path:"",component:T,children:[{path:"",component:v},{path:"login",component:v,title:"Login"},{path:"register",component:(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register-page"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"app-register")},dependencies:[L]}),t})()}]}];let J=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.Bz.forChild(k),s.Bz]}),t})();var R=i(7772),S=i(5316);let Y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,J,R.h,r.u5,r.UX,Z.Aw.forFeature(S.d),s.Bz]}),t})()}}]);